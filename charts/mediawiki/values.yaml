replicaCount: 1

image:
  repository: docker.io/mediawiki
  tag: "1.43"
  pullPolicy: IfNotPresent

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

podAnnotations: {}
podLabels: {}

serviceAccount:
  create: true
  annotations: {}
  name: ""

podSecurityContext: {}

# Leave empty to allow the upstream MediaWiki Apache image to run as root and bind to port 80.
# If you harden this, switch the container to a non-privileged port or add the needed capabilities.
securityContext: {}

service:
  type: ClusterIP
  port: 80

ingress:
  enabled: false
  className: nginx
  annotations: {}
  hosts:
    - host: wiki.local
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: wiki-tls
      hosts:
        - wiki.local

resources: {}

nodeSelector: {}
tolerations: []
affinity: {}

site:
  name: Scout Wiki
  server: https://scoutwiki.local
  scriptPath: ""
  logo: ""
  secretKey: ""
  upgradeKey: ""

database:
  host: mariadb.mariadb.svc.cluster.local
  port: 3306
  name: scoutwiki
  user: scoutwiki
  existingSecret: wiki-database
  passwordKey: password

objectStore:
  type: pvc # change to azure when switching to Azure Blob Storage
  minio:
    bucket: scoutwiki
    region: us-east-1
    endpoint: http://minio.minio.svc.cluster.local:9000
    publicUrl: "" # becomes $wgAWSBucketDomain; support strings like "https://$1.storage.example.com"
    usePathStyle: true
    accessKeySecret: wiki-minio
    accessKeyKey: accessKey
    secretKeySecret: wiki-minio
    secretKeyKey: secretKey
  azure:
    container: wiki
    endpoint: blob.core.windows.net
    accountName: mystorageaccount
    keySecret: wiki-azure-storage
    keySecretKey: accountKey
  pvc:
    existingClaim: ""
    storageClassName: ""
    accessModes:
      - ReadWriteOnce
    size: 10Gi
    annotations: {}
    mountPath: /var/www/html/images

mediawiki:
  configName: localsettings
  extraEnv: []

oidc:
  # Set existingSecret to mount an OIDC client secret at /etc/mediawiki/secrets/oidc/clientSecret.
  # Read it in extraPhp with: trim( file_get_contents('/etc/mediawiki/secrets/oidc/clientSecret') )
  existingSecret: ""
  secretKey: clientSecret

localSettings:
  extraPhp: ""

job:
  update:
    enabled: true
    backoffLimit: 1
